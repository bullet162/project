This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: README.md, package-lock.json, dist, node_modules, .gitignore, .env
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
biome.json
package.json
src/controller/bcrypt.controller.ts
src/index.ts
src/middleware/ResponseGlobal.middleware.ts
src/modules/AccountDetails.module.ts
src/routes/bcrypt.route.ts
src/services/bcrypt.service.ts
src/views/index.html
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="biome.json">
{
	"$schema": "./node_modules/@biomejs/biome/configuration_schema.json",
	"vcs": {
		"enabled": true,
		"clientKind": "git",
		"useIgnoreFile": true
	},
	"files": {
		"includes": [
			"!!**node_modules",
			"!!**/dist",
			"src/**/*"
		]
	},
	"formatter": {
		"enabled": true,
		"indentStyle": "tab"
	},
	"linter": {
		"enabled": true,
		"rules": {
			"recommended": true
		}
	},
	"javascript": {
		"formatter": {
			"quoteStyle": "double"
		}
	},
	"assist": {
		"enabled": true,
		"actions": {
			"source": {
				"organizeImports": "on"
			}
		}
	}
}
</file>

<file path="src/middleware/ResponseGlobal.middleware.ts">
export interface ReturnValues {
    success: boolean,
    data: string,
    message: string,
    error: string,
    status: number
}
export type GlobalResponse = Partial<ReturnValues>;
</file>

<file path="src/views/index.html">

</file>

<file path="src/routes/bcrypt.route.ts">
import { Router } from 'express';
import { IHashPassword, IVerifyPassword } from '../controller/bcrypt.controller';

export const bcryptRouter = Router();

bcryptRouter.post('/hash', IHashPassword);
bcryptRouter.post('/verify', IVerifyPassword);
</file>

<file path="src/controller/bcrypt.controller.ts">
import type { Request, Response, NextFunction } from "express";
import { UseBcrypt } from "../services/bcrypt.service";

const bcryptService = new UseBcrypt();

export const IHashPassword = async (req: Request, res: Response) => {
    try {
        const { plainPassword } = req.body;
        const result = await bcryptService.hashPassword(plainPassword);

        return res.status(result.status!).json(result);
    } catch (error) {
        return res.status(500).json(error);
    }
};

export const IVerifyPassword = async (req: Request, res: Response, next: NextFunction) => {
    try {
        const { plainPassword } = req.body;
        const result = await bcryptService.VerifyPassword(plainPassword);

        return res.status(result.status!).json(result);
    } catch (error) {
        return res.status(500).json(error);
    }
};
</file>

<file path="src/services/bcrypt.service.ts">
import * as bcrypt from 'bcrypt';
import dotenv from 'dotenv';
import type { GlobalResponse } from '../middleware/ResponseGlobal.middleware';
import { error } from 'node:console';
dotenv.config();


export class UseBcrypt {

    async hashPassword(plainPassword: string): Promise<GlobalResponse> {
        try {
            const saltRounds = Number(process.env.SALT_ROUNDS) || 12;

            if (!plainPassword || plainPassword === null) {
                return {
                    success: false,
                    data: "",
                    message: "Password required",
                    error: "Input is missing",
                    status: 400
                };
            }

            const hashedPassword = await bcrypt.hash(plainPassword, saltRounds);

            return {
                success: true,
                data: hashedPassword,
                message: "Password hashed successfully",
                error: "none",
                status: 200
            };
        }
        catch (error) {
            console.error('Cannot encrypt password. ', error);
            throw error;
        }
    }

    async VerifyPassword(plainPassword: string): Promise<GlobalResponse> {
        try {

            if (!plainPassword || plainPassword === null) {
                return {
                    success: false,
                    data: "",
                    message: "Password required",
                    error: "Input is missing",
                    status: 400
                };
            }

            //sample password but need database
            const hashedPassword: string = String(process.env.SAMPLE_PASSWORD);
            const verdict: boolean = await bcrypt.compare(plainPassword, hashedPassword);
            const message: string = verdict === true ? "Password verified" : "Incorrect password";
            const status = verdict === true ? 200 : 401;

            return {
                success: verdict,
                message: message,
                error: "none",
                status: status
            };
        }
        catch (error) {
            console.error('Password process failed. ', error);
            throw error;
        }
    }
}
</file>

<file path="src/modules/AccountDetails.module.ts">
export class UserAccountDetails {

    public id!: number;
    public username!: string;
    public email!: string;
    public firstName!: string;
    public lastName!: string;
    public hashedPassword!: string;
    public middleInitial?: string;

    constructor(data: Partial<UserAccountDetails>) {
        Object.assign(this, data);
    }

    get fullName(): string {
        const middle = this.middleInitial ? `${this.middleInitial}. ` : "";
        return `${this.firstName} ${middle}${this.lastName}`;
    }
}

export class UserPassword {
    plainPassword: string;

    constructor(plainPassword: string) {
        this.plainPassword = plainPassword;
    }
}
</file>

<file path="package.json">
{
  "name": "project",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node dist/index.js",
    "build": "npx tsc src/index.ts",
    "dev": "npx tsx src/index.ts",
    "watch": "npx tsx watch src/index.ts",
    "lint": "npx @biomejs/biome lint --write src",
    "format": "npx @biomejs/biome format --write src"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/bullet162/project.git"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "module",
  "bugs": {
    "url": "https://github.com/bullet162/project/issues"
  },
  "homepage": "https://github.com/bullet162/project#readme",
  "devDependencies": {
    "@biomejs/biome": "^2.3.15",
    "@types/bcrypt": "^6.0.0",
    "@types/express": "^5.0.6",
    "@types/jsonwebtoken": "^9.0.10",
    "@types/node": "^25.2.3",
    "@types/swagger-ui-express": "^4.1.8",
    "express": "^5.2.1",
    "nodemon": "^3.1.11",
    "reflect-metadata": "^0.2.2",
    "ts-node": "^10.9.2",
    "tsx": "^4.21.0",
    "typescript": "^5.9.3"
  },
  "dependencies": {
    "bcrypt": "^6.0.0",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.14.3",
    "dotenv": "^17.3.1",
    "jsonwebtoken": "^9.0.3",
    "swagger-ui-express": "^5.0.1"
  }
}
</file>

<file path="src/index.ts">
import express from "express";
import dotenv from 'dotenv';
import { bcryptRouter } from "./routes/bcrypt.route";
import { hostname } from "node:os";

dotenv.config();

const PORT = Number(process.env.PORT) || 3000;
const app = express();

app.use(express.json());


app.get("/test", (req, res) => {
	res.status(200).send({ message: "Healthy", status: 200 });
});

app.use("/password", bcryptRouter);

const HOSTNAME = process.env.HOST || "localhost";
app.listen(PORT, HOSTNAME, () => {
	console.log(`Server listening: http://${HOSTNAME}:${PORT}`);
});
</file>

<file path="tsconfig.json">
{
  // Visit https://aka.ms/tsconfig to read more about this file
  "compilerOptions": {
    // File Layout
    "rootDir": "./src",
    "outDir": "./dist",
    // Environment Settings
    // See also https://aka.ms/tsconfig/module
    "module": "es2022",
    "target": "es2022",
    "types": [
      "reflect-metadata"
    ],
    // For nodejs:
    "lib": [
      "es2022"
    ],
    //"types": ["node"],
    // and npm install -D @types/node
    // Other Outputs
    "sourceMap": true,
    "declaration": true,
    "declarationMap": true,
    // Stricter Typechecking Options
    "noUncheckedIndexedAccess": true,
    "exactOptionalPropertyTypes": true,
    // Style Options
    // "noImplicitReturns": true,
    // "noImplicitOverride": true,
    // "noUnusedLocals": true,
    // "noUnusedParameters": true,
    // "noFallthroughCasesInSwitch": true,
    // "noPropertyAccessFromIndexSignature": true,
    // Recommended Options
    "strict": true,
    "jsx": "react-jsx",
    "verbatimModuleSyntax": true,
    "isolatedModules": true,
    "noUncheckedSideEffectImports": true,
    "moduleDetection": "force",
    "skipLibCheck": true,
    "esModuleInterop": true,
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true
  },
  "include": [
    "src/**/*"
  ]
}
</file>

</files>
